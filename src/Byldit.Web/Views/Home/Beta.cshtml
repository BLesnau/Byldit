@using Byldit.Web.Configs
@using System.Web.Helpers
@{
    ViewBag.Title = "Byldit";
}
@section header
{
    @*<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />*@
    <meta name="viewport" content="width=device-width" />
    <style type="text/css">
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map-canvas {
            height: 100%;
        }
    </style>
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlZMdkkoh0DdR8d06ifz0JeREYVdPsmpU&sensor=true&libraries=geometry">
    </script>
    <script type="text/javascript"
        src="~/Scripts/ShowTagsButton.js">
    </script>
    <script type="text/javascript">
        function initialize() {
            $("#signedIn").hide();
            $("#notSignedIn").hide();

            mobileServicesUrl = "@GlobalConfig.GetString( "AzureMobileServiceUrl" )";
            mobileServicesKey = "@GlobalConfig.GetString( "AzureMobileServiceKey" )";

            LoadSettings();

            var mapOptions = {
                center: new google.maps.LatLng(locLat, locLon),
                zoom: 4,
                mapTypeId: google.maps.MapTypeId.ROADMAP//,
                //streetViewControl: true
            };
            googleMap = new google.maps.Map(document.getElementById("map-canvas"),
                mapOptions);

            google.maps.event.addListener(googleMap, 'click', function (event) {
                placeMarker(event.latLng);
            });

            getLocation();

            google.maps.event.trigger(googleMap, 'resize');

            $("#content").height($(window).height() - 85);
            $(window).resize(function () {
                $("#content").height($(window).height() - 85);
            });

            var showTagControlDiv = document.createElement('div');
            var showTagButton = new ShowTagsButton(showTagControlDiv, googleMap, showTagsClicked);

            showTagControlDiv.index = 1;
            googleMap.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(showTagControlDiv);
        }
        google.maps.event.addDomListener(window, 'load', initialize);

        function showTagsClicked() {
            loadPins();
        }
    </script>
}

<div id="topBarContainer">
    <div class="lockedHeader">
        <img class="logoPadding" src="~/Content/Images/byldit-header-logo-combined.png" />
        
        <div class="floatRight">
            <div id="notSignedIn" class="socialPaddingNotSignedIn" >
                <div class="signInText">Sign in</div>
                <a class="socialButton" href="javascript:login(&quot;facebook&quot;)"><img src="~/Content/Images/facebook-widget.jpg" /></a>
                <a class="socialButton" href="javascript:login(&quot;twitter&quot;)"><img src="~/Content/Images/twitter-widget.jpg" /></a>
                <a class="socialButton" href="javascript:login(&quot;google&quot;)"><img src="~/Content/Images/google-widget.jpg" /></a>

                <br />

                <label class="signInText"><input type="checkbox" name="rememberMe" value="value" />Remember me</label>
            </div>
            
            <div id="signedIn" class="socialPaddingSignedIn" >
                <div>
                    <label class="signInTextBig vertMiddle">Signed in with</label>
                    <img id="fbLogo" class="providerIcon vertMiddle" src="~/Content/Images/facebook-widget.jpg" />
                    <img id="twitterLogo" class="providerIcon vertMiddle" src="~/Content/Images/twitter-widget.jpg" />
                    <img id="googleLogo" class="providerIcon vertMiddle" src="~/Content/Images/google-widget.jpg" />
                </div>
                <div class="signOutTextPadding">
                    <a class="signOutText" href="javascript:logout();">Sign out</a>
                </div>
            </div>
        </div>

    </div>
</div>

<div id="content">
    <div id="map-canvas" />
    <div>
        <a href="javascript:loadPins()">
            <img src="~/Content/Images/show-byldtags-text.png" />
        </a>
    </div>
</div>
